////

|metadata|
{
    "name": "xamdiagram-configuring-the-layout",
    "tags": ["Charting","Data Presentation","How Do I","Layouts"],
    "controlName": ["xamDiagram"],
    "guid": "6e79ab39-d6cf-4b7f-9374-b08513388cf2",  
    "buildFlags": [],
    "createdOn": "2014-06-16T09:41:44.5509903Z"
}
|metadata|
////

= レイアウトの構成 (xamDiagram)

== トピックの概要

=== 目的

このトピックでは、 _xamDiagram_™ のレイアウトを構成する方法、およびカスタム レイアウトのスキームを作成する方法を説明します。

=== 前提条件

このトピックを理解するために、以下のトピックを参照することをお勧めします。

[options="header", cols="a,a"]
|====
|トピック|目的

| link:xamdiagram-general-overview.html[概要 ( _xamDiagram_ )]
|このトピックでは、 _xamDiagram_ コントロールおよびその主要機能の概念的な概要を説明します。

| link:xamdiagram-adding-to-a-page.html[ _xamDiagram_ をページに追加]
|このトピックでは、 _xamDiagram_ コントロールを WPF アプリケーションに追加する方法を説明します。

|====

=== このトピックの内容

このトピックは、以下のセクションで構成されます。

* <<_Ref386477912, 概要 >>

** <<_Ref386477960,ダイアグラムのレイアウト構成の概要>>
** <<_Ref387492519,ダイアグラムのレイアウト構成の概要表>>

* <<_Ref386478000, レイアウトの適用 >>

** <<_Ref386478019,概要>>
** <<_PropertySettings,プロパティ設定>>
** <<_Ref386478040,例>>

* <<_Ref386478056, カスタム レイアウトの作成 >>

** <<_Ref390709033,概要>>
** <<_Ref390709035,プレビュー>>
** <<_Ref390709040,前提条件>>
** <<_Ref390709041,手順>>
** <<_Ref382317785,全コード>>

* <<_Ref386478097, 関連コンテンツ >>

** <<_Ref386478106,トピック>>

[[_Ref386477912]]
== 概要

[[_Ref386477960]]

=== ダイアグラムのレイアウト構成の概要

_xamDiagram_   のノードを配置するには、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.diagramnode~position.html[DiagramNode.Position] プロパティを設定する、および link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.xamdiagram~layout.html[XamDiagram.Layout] プロパティを設定する 2 つの方法があります。現在、3 つの定義済みレイアウト link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.forcedirectedgraphdiagramlayout_members.html[ForceDirectedGraphDiagramLayout]、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.treediagramlayout_members.html[TreeDiagramLayout] 、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.griddiagramlayout_members.html[GridDiagramLayout] が使用できます。カスタム レイアウトは、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout_members.html[IDiagramLayout] インターフェイスを実装すると使用できます。link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout_members.html[IDiagramLayout] インターフェイスには、単一の `IEnumerable<DiagramNode>` パラメーターを取得する単一の link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout~arrangenodes.html[ArrangeNodes] メソッドがあります。このメソッドでは、指定されたノードの Position プロパティを目的のレイアウト スキームに応じて設定する必要があります。

.注:
[NOTE]
====
ダイアグラムにレイアウトが適用されるのは、最初の 1 回のみです。後で項目を追加 / 削除した場合、レイアウトは自動的に適用されません。ノードを後で再配置するには、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.xamdiagram~refreshlayout.html[RefreshLayout] メソッドを呼び出します。
====

[[_Ref387492519]]

=== ダイアグラムのレイアウト構成の概要表

以下の表は、 _xamDiagram_   レイアウトの構成可能な要素を簡単に説明し、それらを構成する API にマップします。

[options="header", cols="a,a,a"]
|====
|目的:|使用する API メンバー:|操作:

|レイアウトの適用
| link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.xamdiagram~layout.html[XamDiagram.Layout]
| link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.treediagramlayout_members.html[TreeDiagramLayout] クラスのインスタンス、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.forcedirectedgraphdiagramlayout_members.html[ForceDirectedGraphDiagramLayout] クラスまたは link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout_members.html[IDiagramLayout] インターフェイスを実装するクラスのインスタンスに設定します

|カスタム レイアウトの作成
| link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout_members.html[IDiagramLayout]
|このインターフェイスを実装するクラスを作成します

|====

[[_Ref386478000]]
== レイアウトの適用

[[_Ref386478019]]

=== 概要

_xamDiagram_   のレイアウトを設定するには、提供された link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.forcedirectedgraphdiagramlayout_members.html[ForceDirectedGraphDiagramLayout]、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.treediagramlayout_members.html[TreeDiagramLayout] または link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.griddiagramlayout_members.html[GridDiagramLayout] クラス、またはカスタムの link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout_members.html[IDiagramLayout] の実装に link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.xamdiagram~layout.html[Layout] プロパティを設定します。

[[_PropertySettings]]

=== プロパティ設定

以下の表は、任意の構成とそれを管理するプロパティ設定のマッピングを示します。

[options="header", cols="a,a,a"]
|====
|設定の目的:|使用するプロパティ:|設定値:

|ダイアグラム ノードのレイアウト
| link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.xamdiagram~layout.html[レイアウト]
| link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout_members.html[IDiagramLayout] インターフェイスを実装するクラスのインスタンス。

|====

[[_Ref386478040]]

=== 例

以下のスクリーンショットは、 link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.xamdiagram~layout.html[Layout] プロパティが link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.forcedirectedgraphdiagramlayout_members.html[ForceDirectedGraphDiagramLayout] インスタンスに設定されると、 _xamDiagram_   がどのように表示されるかを示しています。

image::images/xamDiagram_Configuring_The_Layout_1.png[]

以下のコードを、`ForceDirectedGraphDiagramLayout` に適用します。

*XAML の場合:*

[source,xaml]
----
<ig:XamDiagram>
    <ig:XamDiagram.Layout>
        <ig:ForceDirectedGraphDiagramLayout />
    </ig:XamDiagram.Layout>
    …
</ig:XamDiagram>
----

[[_Configuring_a_Custom]]
[[_Ref386478056]]
== カスタム レイアウトの作成

[[_Ref390709033]]

=== 概要

以下の手順では、右下方向にダイアグラムのノードを順次配置するカスタム レイアウトの作成方法を説明します。

[[_Ref390709035]]

=== プレビュー

以下のスクリーンショットは結果のプレビューです。

image::images/xamDiagram_Configuring_The_Layout_2.png[]

[[_Ref390709040]]

=== 前提条件

この手順を実行するには、以下が必要です。

* link:xamdiagram-adding-to-a-page.html[ _xamDiagram_  をページに追加]に記載された、 _xamDiagram_   が必要とするアセンブリを持つ WPF アプリケーション。

[[_Ref390709041]]

=== 手順

以下の手順は、カスタムの対角線のレイアウトを作成する方法を示します。

=== 1.IDiagramLayout インターフェイスの実装

link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout_members.html[IDiagramLayout] インターフェイスを実装するクラスを作成します。

IDiagramLayout インターフェイスを実装する新しい `DiagonalLayout` クラスを作成します。link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.idiagramlayout~arrangenodes.html[ArrangeNodes] メソッドでノードを繰り返し、各ノードの link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.diagramnode~position.html[Position] を、前のノードの link:{ApiPlatform}controls.charts.xamdiagram{ApiVersion}~infragistics.controls.charts.diagramitem~bounds.html[Bounds] 長方形の右下隅に設定します。 この例では、ノード間のスペースを制御する `Offset` プロパティを追加しています。実装の詳細は、<<_Ref382317785,全コード>>を参照してください。

=== 2.対角線のレイアウトの適用

対角線のレイアウトを適用するには、`DiagonalLayout` クラスのインスタンスを設定します。

[[_Ref382317785]]

=== 全コード

以下は、この手順の完全なコードです。

*C# の場合:*

[source,csharp]
----
namespace XamDiagramSample
{
    public class DiagonalLayout : IDiagramLayout
    {
        public double Offset { get; set; }
        public void ArrangeNodes(IEnumerable<DiagramNode> nodes)
        {
            Point nextPoint = new Point(0,0);
            foreach (DiagramNode node in nodes)
            {
                node.Position = nextPoint;
                nextPoint = new Point(node.Bounds.Right + Offset, node.Bounds.Bottom + Offset);
            }
        }
    }
}
----

*Visual Basic の場合:*

[source,vb]
----
Namespace XamDiagramSample
    Public Class DiagonalLayout
        Implements IDiagramLayout
        Public Property Offset As Double
        Public Sub ArrangeNodes(nodes As IEnumerable(Of DiagramNode)) Implements IDiagramLayout.ArrangeNodes
            Dim nextPoint As New Point(0, 0)
            For Each node As DiagramNode In nodes
                node.Position = nextPoint
                nextPoint = New Point(node.Bounds.Right + Offset, node.Bounds.Bottom + Offset)
            Next
        End Sub
    End Class
End Namespace
----

*XAML の場合:*

[source,xaml]
----
<ig:XamDiagram x:Name="Diagram" 
        xmlns:local="clr-namespace:XamDiagramSample">
    <ig:XamDiagram.Layout>
        <local:DiagonalLayout Offset="10"/>
    </ig:XamDiagram.Layout>
    <ig:DiagramNode Content="1"/>
    <ig:DiagramNode Content="2"/>
    <ig:DiagramNode Content="3"/>
    <ig:DiagramNode Content="4"/>
</ig:XamDiagram>
----

[[_Ref386478097]]
== 関連コンテンツ

[[_Ref386478106]]

=== トピック

以下のトピックでは、このトピックに関連する追加情報を提供しています。

[options="header", cols="a,a"]
|====
|トピック|目的

| link:xamdiagram-configuring-the-position-and-size-of-diagram-nodes.html[ダイアグラム ノードの位置およびサイズの構成 ( _xamDiagram_ )]
|このトピックでは、 _xamDiagram_ コントロールのダイアグラムの各ノードのサイズと位置を制御する方法を説明します。

|====
////

|metadata|
{
    "name": "xamgrid-add-new-row",
    "controlName": ["xamGrid"],
    "tags": ["Editing","Grids","Templating"],
    "guid": "{E4BF37BF-DDF3-4992-8375-7B8D25B75A80}",  
    "buildFlags": [],
    "createdOn": "2016-05-25T18:21:55.95317Z"
}
|metadata|
////

{XamGridHeader}

= 新規行の追加

xamGrid コントロールは、 link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.primitives.addnewrow.html[AddNewRow] オブジェクトによって、新しいレコードをデータ ソースに追加するための便利かつ洗練された方法を提供します。この行は、 link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.addnewrowsettings.html[AddNewRowSettings] オブジェクトの設定に基づいて、xamGrid の行コレクションの上または下のいずれかに存在します。エンドユーザーが各セルにデータを入力でき、コミットされると、データ コレクションに新しいデータ レコードを追加します。コントロールまたは各 link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.columnlayout.html[ColumnLayout] オブジェクトで新規行の追加の設定を構成できます。新規行の追加はルート バンドに固定されます。つまり行は同じバンドの他の行と一緒にスクロールされません。すべてのその他のバンドでは、行は通常の行アイランドにあります。

新規行追加機能は、xamGrid で編集機能から独立しています。AddNewRow オブジェクトでセルを編集するために編集を有効にする必要はありません。これによってエンドユーザーがデータを追加することは許可し、既存のデータを変更することは許可しないようにすることができます。ただし、新規行の追加内の編集動作は、通常の行での編集時と同じです。編集動作の詳細は、 link:xamgrid-editing-data.html[「データの編集」]の「動作の編集」セクションを参照してください。

[NOTE]
====
注: レコードを追加して正しく機能させるには IList を実装するオブジェクトが基本のデータ ソースとして必要です。
====

== 新規行追加の設定

AddNewRowSettings オブジェクトは xamGrid の新規行追加を設定するためのプロパティのリストを提供します。

* link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.addnewrowsettings~allowaddnewrow.html[AllowAddNewRow] - 新規行追加機能を有効/無効にします。AddNewRowLocation 列挙体は Top、Bottom、Both または None という値を提供します。
* link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.editingsettingsbase~isenterkeyeditingenabled.html[IsEnterKeyEditingEnabled] - Enter キーによる編集を有効/無効にします。
* link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.editingsettingsbase~isf2editingenabled.html[IsF2EditingEnabled] - F2 キーによる編集を有効/無効にします。

ifdef::sl,wpf[]
* link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.editingsettingsbase~ismouseactioneditingenabled.html[IsMouseActionEdtingEnabled] - シングル クリックまたはダブル クリックでの編集を可能にします。

endif::sl,wpf[]

ifdef::win-rt[]
* link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.editingsettingsbase~ispointeractioneditingenabled.html[IsPointerActionEdtingEnabled] – シングルまたはダブル クリック/タップでの編集を可能にします。

endif::win-rt[]

* link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.editingsettingsbase~isoncellactiveeditingenabled.html[IsOnCellActiveEditingEnabled] - たとえば Tab キーでセルがアクティブになっている時の編集を有効/無効にします。

== 新規行追加を有効にする

以下のコードは新規行追加を有効にする方法を示します。

*XAML の場合:*

----
<Grid x:Name="LayoutRoot" Background="White">
    <ig:XamGrid x:Name="xamGrid1" ItemsSource="{Binding Source={StaticResource DataUtil}, Path=CategoriesAndProducts}">
        <ig:XamGrid.AddNewRowSettings>
            <ig:AddNewRowSettings AllowAddNewRow="Top" />
        </ig:XamGrid.AddNewRowSettings>
        <ig:XamGrid.Columns>
            <ig:TextColumn Key="CategoryID" />
            <ig:ColumnLayout Key="Products">
                <ig:ColumnLayout.AddNewRowSettings>
                    <grid:AddNewRowSettingsOverride AllowAddNewRow="Bottom" />
                </ig:ColumnLayout.AddNewRowSettings>
            </ig:ColumnLayout>
        </ig:XamGrid.Columns>
    </ig:XamGrid>
</Grid>
----

*Visual Basic の場合:*

----
Me.xamGrid1.AddNewRowSettings.AllowAddNewRow = Infragistics.Controls.Grids.AddNewRowLocation.Top
Me.xamGrid1.Columns.ColumnLayouts("Products").AddNewRowSettings.AllowAddNewRow = Infragistics.Controls.Grids.AddNewRowLocation.Bottom
----

*C# の場合:*

----
this.xamGrid1.AddNewRowSettings.AllowAddNewRow = Infragistics.Controls.Grids.AddNewRowLocation.Top;
this.xamGrid1.Columns.ColumnLayouts["Products"].AddNewRowSettings.AllowAddNewRow = Infragistics.Controls.Grids.AddNewRowLocation.Bottom;
----

ifdef::sl,wpf[]
image::images/sl_xamGrid_Add_New_Row_01.png[]
endif::sl,wpf[]

ifdef::win-rt[]
image::images/RT_xamGrid_Add_New_Row_01.png[]
endif::win-rt[]

== コード ビハインドから新しいレコードを追加

新規行追加機能を有効にすることなく、コード ビハインドから行を追加できます。以下のコードは新しいレコードをデータ ソースに追加する方法を示します。

*Visual Basic の場合:*

----
Dim category As New Category()
category.CategoryID = 9
category.CategoryName = "Fruits"
category.Description = "Apples, Grapes, Oranges"
Dim categories As ObservableCollection(Of Category) = TryCast(Me.xamGrid1.ItemsSource, ObservableCollection(Of Category))
categories.Add(category)
----

*C# の場合:*

----
Category category = new Category();
category.CategoryID = 9;
category.CategoryName = "Fruits";
category.Description = "Apples, Grapes, Oranges";
ObservableCollection<Category> categories = this.xamGrid1.ItemsSource as ObservableCollection<Category>;
categories.Add(category);
----

ifdef::sl,wpf[]
image::images/sl_xamGrid_Add_New_Row_02.png[]
endif::sl,wpf[]

ifdef::win-rt[]
image::images/RT_xamGrid_Add_New_Row_02.png[]
endif::win-rt[]

ifdef::sl,wpf[]
== AddNewRowTemplate
endif::sl,wpf[]

ifdef::sl,wpf[]
空白行は AddNewRow 領域のデフォルト表示です。新規行を追加する時、特定の Column タイプのデフォルト エディタが使用されます。ただし、データ テンプレートを使用することでこれらのデフォルトの動作をカスタマイズできます。これは、Column オブジェクトの link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.column~addnewrowitemtemplate.html[AddNewRowItemTemplate] プロパティと link:{ApiPlatform}controls.grids.xamgrid{ApiVersion}~infragistics.controls.grids.column~addnewroweditortemplate.html[AddNewRowEditorTemplate] プロパティをデータ テンプレートのインスタンスに設定することで達成されます。
endif::sl,wpf[]

ifdef::sl,wpf[]
以下のコードは AddNewRowItemTemplate プロパティと AddNewRowEditorTemplate プロパティを設定する方法を示します。
endif::sl,wpf[]

ifdef::wpf[]

*XAML の場合:*

----
<ig:TextColumn Key="SKU">
   <ig:TextColumn.AddNewRowItemTemplate>
      <DataTemplate>
         <TextBlock Foreground="#FF3AB5E9" Text="Enter Value"/> 
      </DataTemplate>
   </ig:TextColumn.AddNewRowItemTemplate>
   <ig:TextColumn.AddNewRowEditorTemplate>
      <DataTemplate>
         <TextBox Text="{Binding SKU, Mode=TwoWay,UpdateSourceTrigger=Explicit}"  Background="#FF3AB5E9"/>
      </DataTemplate>
   </ig:TextColumn.AddNewRowEditorTemplate>
</ig:TextColumn>
----

endif::wpf[]

ifdef::sl,wpf[]
以下の図は上記のコードで設定されたテンプレートを示します。
endif::sl,wpf[]

ifdef::sl,wpf[]
image::images/xamGrid_AddNewRowTemplate_01.png[]
endif::sl,wpf[]

ifdef::sl,wpf[]
図 1: AddNewRowItemTemplate を実装した xamGrid コントロール
endif::sl,wpf[]

ifdef::sl,wpf[]
image::images/xamGrid_AddNewRowTemplate_02.png[]
endif::sl,wpf[]

ifdef::sl,wpf[]
図 2: AddRowEditorTemplate を実装した xamGrid コントロール
endif::sl,wpf[]

== 関連トピック

link:xamgrid-editing-data.html[データの編集]

link:xamgrid-row-deletion.html[行の削除]

pick:[win-rt=" link:bb45cdbe-7149-49bc-a63a-1a77676c6986[タッチ サポート]"]
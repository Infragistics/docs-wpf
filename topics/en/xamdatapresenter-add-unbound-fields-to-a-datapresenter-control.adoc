////
|metadata|
{
    "name": "xamdatapresenter-add-unbound-fields-to-a-datapresenter-control",
    "controlName": ["xamDataPresenter"],
    "tags": ["How Do I"],
    "guid": "{19E0C15D-34AF-436C-B315-0D64B2938E5D}",
    "buildFlags": [],
    "createdOn": "2012-01-30T19:39:53.0879707Z"
}
|metadata|
////

= Configuring Unbound Field

== Purpose

This topic describes how to create an unbound field in the _xamDataPresenter_™ controls. The unbound fields are used for a variety of purposes such as displaying a calculated value or binding to a complex property.

== Required background

The following topics are prerequisites to understanding this topic:

[options="header", cols="a,a"]
|====
|Topic|Purpose

| link:xamdatagrid-getting-started-with-xamdatagrid.html[Adding xamDataGrid to Your Page]
|This topic describes how to add a _xamDataGrid_ control to your page.

| link:xamdatagrid-accessing-data.html[Binding xamDataGrid to Data]
|This section lists the topics written specifically to help you access data using _xamDataGrid_ control.

|====

== In this topic

This topic contains the following sections:

* <<_Ref391653361, Configuring a Field to be Unbound >>
* <<_Ref406692653, Configuring a Field Binding Using AlternateBinding >>
* <<_Ref391715252, Related Topics >>

[[_Ref391653361]]
== Configuring a Field to be Unbound

=== Overview

You can configure any link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field_members.html[Field] to be unbound by setting its link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~bindingtype.html[BindingType] property to `Unbound` and this way use it to display a calculated value or a complex type in the _xamDataPresenter_ controls. For more information about the base link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field_members.html[Field] properties, read the link:xamdata-terms-fields.html[Fields] topic.

=== Property settings

The following table maps the desired configuration to the property settings that manage it.

[options="header", cols="a,a,a"]
|====
|In order to:
|Use this property:
|And set it to:

|Bind the field to a property directly defined in the data item
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~bindingtype.html[BindingType]
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.bindingtype.html[UseNameBinding] 

This is the default value. 

The binding mechanism looks for a data item property name that matches the `Field`{empty}'s `Name` property exactly. This approach provides better performance than using alternate bindings.

|Bind the field to a property which is not directly defined in the data item
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~bindingtype.html[BindingType]
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.bindingtype.html[UseAlternateBinding] 

In this case you need to specify the binding in the field's link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~alternatebinding.html[AlternateBinding] property.

.Note 
[NOTE] 
==== 
`AlternateBinding` leads to additional memory and performance overhead than the default name binding. 
====

|Set a `Field` to be unbound
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~bindingtype.html[BindingType]
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.bindingtype.html[Unbound] 

This binding type is set when the cell value is set through a mechanism other than binding, e.g. through code or as the target of a formula.

|Specify if the `Field` should auto-release binding objects in case `AlternateBinding` is used
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~alternatebindingretentionmode.html[AlternateBindingRetentionMode]
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.bindingretentionmode.html[AutoRelease] 

This is the default value. 

A `Field` with an `AlternateBinding` creates a binding object for every cell whose value is accessed and then discards it after the cell is scrolled out of view and its value isn't required for summary calculations. This minimizes memory usage.

|Specify the `Field` should retain binding objects after they are created in case `AlternateBinding` is used
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~alternatebindingretentionmode.html[AlternateBindingRetentionMode]
| link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.bindingretentionmode.html[Retain] 

Set this property to `Retain` when sort, group-by or any other operations that require accessing values of all the unbound cells is performed in order to prevent performance impact.

|====

=== Example

The screenshot below demonstrates how `Bonus` and `Total Salary` `CurrencyField` are set to be unbound in the _xamDataGrid_ control.

image::images/Configuring_Unbound_Field_2.png[]

Following is the code that implements this example.

*In XAML:*
[source,xaml]
----
<igDP:XamDataGrid x:Name="DataGrid" BindToSampleData="True"
                  InitializeRecord="DataGrid_OnInitializeRecord">
    <igDP:XamDataGrid.FieldLayouts>
        <igDP:FieldLayout>
            <igDP:FieldLayout.Fields>
                <igDP:Field Name="name" Label="Employee Name" />                      
                <igDP:CurrencyField Name="salary" Label="Salary" />
                <!-- Unbound Currency Fields displaying calculated values -->
                <igDP:CurrencyField Name="bonus" Label="Bonus" BindingType="Unbound" />
                <igDP:CurrencyField Name="totalSalary" Label="Total Salary" BindingType="Unbound" />
            </igDP:FieldLayout.Fields>
        </igDP:FieldLayout>
    </igDP:XamDataGrid.FieldLayouts>
</igDP:XamDataGrid>
----

*In C#:*
[source,csharp]
----
private void DataGrid_OnInitializeRecord(object sender, 
            Infragistics.Windows.DataPresenter.Events.InitializeRecordEventArgs e)
{
    if (e.Record is DataRecord)
    {
        //get the current records data, perform the appropriate
        //calculations and assign the values to the unbound currency fields
        var dr = (DataRecord)e.Record;
        double salary = double.Parse(dr.Cells["salary"].Value.ToString());
        double bonus = (salary * 10)/100;
        double totalSalary = salary + bonus;
        dr.Cells["bonus"].Value = bonus;
        dr.Cells["totalSalary"].Value = totalSalary;
    }
}
----

*In Visual Basic:*
[source,vb]
----
Private Sub DataGrid_OnInitializeRecord(sender As Object, e As Infragistics.Windows.DataPresenter.Events.InitializeRecordEventArgs)
    If TypeOf e.Record Is DataRecord Then
        'get the current records data, perform the appropriate
        'calculations and assign the values to the unbound currency fields
        Dim dr = DirectCast(e.Record, DataRecord)
        Dim salary As Double = Double.Parse(dr.Cells("salary").Value.ToString())
        Dim bonus As Double = (salary * 10) / 100
        Dim totalSalary As Double = salary + bonus
        dr.Cells("bonus").Value = bonus
        dr.Cells("totalSalary").Value = totalSalary
    End If
End Sub
----

[[_Ref406692653]]
== Configuring a Field Binding Using AlternateBinding

=== Overview

If you need to create a field which is not bound to a property directly defined in the data item you should create a field and set its link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~bindingtype.html[BindingType] property to link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.bindingtype.html[UseAlternateBinding]. Use the field's link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~alternatebinding.html[AlternateBinding] and link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field~alternatebindingretentionmode.html[AlternateBindingRetentionMode] properties to configure the alternate binding.

=== Example

The screenshot below demonstrates the `AlternateBinding` property example with the _xamDataGrid_ control:

image::images/Configuring_Unbound_Field_3.png[]

Following is the code that implements the example that demonstrates the usage of the `AlternateBinding` property to create and bind fields to data.

The Models and ViewModel code is available here: link:resources-productdata.html[ProductData.cs]

The link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.field_members.html[Field] `AlternateBinding` property can be set in XAML or in code-behind.

*Setting the AlternateBinding in XAML:* 

*In XAML:*
[source,xaml]
----
<Grid>
    <Grid.DataContext>
        <data:ProductData />
    </Grid.DataContext>
    <igDP:XamDataGrid x:Name="DataGrid" 
                      DataSource="{Binding Path=Products}"
                      FieldLayoutInitialized="DataGrid_OnFieldLayoutInitialized">
        <igDP:XamDataGrid.FieldLayoutSettings>
            <igDP:FieldLayoutSettings AutoGenerateFields=" />
        </igDP:XamDataGrid.FieldLayoutSettings>
        <igDP:XamDataGrid.FieldLayouts>
            <igDP:FieldLayout>
                <igDP:FieldLayout.Fields>
                    <igDP:TextField Name="ProductID" Label="Product ID" />
                    <igDP:TextField Name="ProductName" Label="Product Name" />
                    <igDP:Field Label="Category Name" 
                        AlternateBinding="{Binding Path=Category.CategoryName}" />
                </igDP:FieldLayout.Fields>
            </igDP:FieldLayout>
        </igDP:XamDataGrid.FieldLayouts>
    </igDP:XamDataGrid>
</Grid>
----

*Setting the AlternateBinding in code-behind:*

Adding of the newly created field is done in the link:{ApiPlatform}datapresenter{ApiVersion}~infragistics.windows.datapresenter.datapresenterbase~fieldlayoutinitialized_ev.html[FieldLayoutInitialized] event handler.

*In C#:*
[source,csharp]
----
private void DataGrid_OnFieldLayoutInitialized(object sender, FieldLayoutInitializedEventArgs e)
{
    var fieldDesc = new Field
    {
        Label = "Category Description",
        AlternateBinding = new Binding("Category.Description"),
    };
    e.FieldLayout.Fields.Add(fieldDesc);
}
----

*In Visual Basic:*
[source,vb]
----
Private Sub DataGrid_OnFieldLayoutInitialized(sender As Object, e As FieldLayoutInitializedEventArgs)
    Dim fieldDesc = New Field() With { 
        .Label = "Category Description", 
        .AlternateBinding = New Binding("Category.Description") 
    }
    e.FieldLayout.Fields.Add(fieldDesc)
End Sub
----

[[_Ref391715252]]
== Related Topics

The following topics provide additional information related to this topic.

[options="header", cols="a,a"]
|====
|Topic|Purpose

| link:xamdatapresenter-define-a-field-layout.html[Define a Field Layout]
|This topic describes how to define field layouts to specify which fields to display and to set properties related to those fields in the _xamDataPresenter_ controls.

| link:xamdatagrid-configuring-specific-editor-fields.html[Configuring Specific Editor Fields]
|This topic describes an easy and straightforward way of configuring specific editor fields for different data types in the _xamDataPresenter_ controls.

| link:xamdatapresenter-configuring-template-field.html[Configuring Template Field]
|This topic describes how to create a field with a custom display and edit template using a TemplateField in the _xamDataPresenter_ controls.

| link:xamdata-generating-fields-manually-versus-automatically.html[Generating Fields Manually Versus Automatically]
|This topic describes the difference between automatic and manual Fields generation in the _xamDataPresenter_ controls.

| link:xamdatapresenter-manually-assigning-a-field-layout-to-xamdatapresenter.html[Manually Assigning a Field Layout to xamDataPresenter]
|This topic describes how you can create multiple FieldLayouts for the _xamDataPresenter_ controls.

| link:xam-data-grid-displaying-an-image-in-a-field.html[Displaying an Image in a Field]
|This topic describes how to add a Field to display an image overriding the CellValuePresenter's template in the _xamDataPresenter_ controls.

| link:xamdatapresenter-load-field-customizations.html[Load Field Customizations]
|This topic describes how to load field customizations for the _xamDataPresenter_ controls.

| link:xamdatapresenter-save-field-customizations.html[Save Field Customizations]
|This topic describes how to save field customizations for the _xamDataPresenter_ controls.

| link:xamdatagrid-changing-the-default-column-and-row-definitions.html[Changing the Default Column and Row Definitions]
|This topic describes how to change the layout customizing the Row, Column, ColumnSpan, or RowSpan on each Field to further control the layout of the Record.

| link:xamdatagrid-changing-the-record-orientation.html[Changing the Record Orientation]
|This topic describes how to change the Record orientation.

| link:xamdata-enabling-right-to-left-support.html[Enabling Right to Left Support]
|This topic describes how to change the content flow direction.

| link:xamdatagrid-fields-editors-configuration-.html[Field’s Editors Configuration]
|This topic explains how to configure the controls on the data presenter field editor.

|====